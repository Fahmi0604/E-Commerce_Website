{"ast":null,"code":"var _jsxFileName = \"/Users/fahmifirmansyah/Documents/Semester 6/Pemrograman_Berbasis_Framework/UAS/televisi-app/src/component/keranjang/Keranjang.jsx\";\nimport React, { Component } from 'react';\nimport firebase from 'firebase';\nimport firebaseConfig from '../../config';\nimport PostKeranjang from './PostKeranjang';\n\nclass Keranjang extends Component {\n  constructor(props) {\n    super(props);\n\n    this.ambilDataDariServerAPI = uid => {\n      // this.authListener();\n      // console.log(\"uid: \"+this.state.user.uid)\n      const userRef = firebase.database().ref('keranjang/' + this.state.user.uid);\n      userRef.once('value', snapshot => {\n        let newUserState = [];\n        snapshot.forEach(data => {\n          const dataVal = data.val();\n          newUserState.push({\n            id: data.key,\n            nama: dataVal.nama,\n            harga: dataVal.harga,\n            gambar: dataVal.gambar,\n            stok: dataVal.stok,\n            qty: dataVal.qty\n          });\n        });\n        this.setState({\n          listKeranjang: newUserState\n        }); // console.log(this.state);\n      });\n    };\n\n    if (!firebase.apps.length) {\n      firebase.initializeApp(firebaseConfig);\n    } else {\n      firebase.app(); // if already initialized, use that one\n    }\n\n    this.state = {\n      listKeranjang: [],\n      user: {}\n    };\n    this.authListener();\n  }\n\n  authListener() {\n    firebase.auth().onAuthStateChanged(user => {\n      if (user) {\n        this.setState({\n          user\n        });\n        this.ambilDataDariServerAPI(user.uid);\n        console.log(\"User adalah : \" + user.email);\n      } else {\n        this.setState({\n          user: null\n        });\n      }\n    });\n  }\n\n  // componentWillMount() {\n  //   this.authListener();\n  // }\n  componentDidMount() {\n    // this.authListener();\n    this.ambilDataDariServerAPI();\n  }\n\n  componentDidUpdate(prevProps, prevState) {// this.ambilDataDariServerAPI();\n  }\n\n  render() {\n    var no = 0;\n    var total = 0;\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"post-televisi\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"center\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"h2\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 19\n      }\n    }, \"Keranjang\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"tgh\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"table\", {\n      border: \"1\",\n      cellPadding: \"5\",\n      width: \"100%\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 13\n      }\n    }, /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"th\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }\n    }, \"No\"), /*#__PURE__*/React.createElement(\"th\", {\n      align: \"left\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 17\n      }\n    }, \"Nama\"), /*#__PURE__*/React.createElement(\"th\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98,\n        columnNumber: 17\n      }\n    }, \"Gambar\"), /*#__PURE__*/React.createElement(\"th\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 17\n      }\n    }, \"Harga\"), /*#__PURE__*/React.createElement(\"th\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 17\n      }\n    }, \"Qty\"), /*#__PURE__*/React.createElement(\"th\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 17\n      }\n    }, \"Subtotal\")), this.state.listKeranjang.map(televisi => {\n      no += 1;\n      total += televisi.harga * televisi.qty;\n      return /*#__PURE__*/React.createElement(PostKeranjang, {\n        no: no,\n        key: televisi.id,\n        id: televisi.id,\n        nama: televisi.nama,\n        harga: televisi.harga,\n        gambar: televisi.gambar,\n        stok: televisi.stok,\n        qty: televisi.qty,\n        tambahTelevisi: this.handleGetTelevisi,\n        __self: this,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 21\n        }\n      });\n    }), /*#__PURE__*/React.createElement(\"tr\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 15\n      }\n    }, /*#__PURE__*/React.createElement(\"td\", {\n      colSpan: \"5\",\n      align: \"right\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 122,\n        columnNumber: 17\n      }\n    }, \"Total : \"), /*#__PURE__*/React.createElement(\"td\", {\n      align: \"center\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 17\n      }\n    }, total)))));\n  }\n\n}\n\nexport default Keranjang;","map":{"version":3,"sources":["/Users/fahmifirmansyah/Documents/Semester 6/Pemrograman_Berbasis_Framework/UAS/televisi-app/src/component/keranjang/Keranjang.jsx"],"names":["React","Component","firebase","firebaseConfig","PostKeranjang","Keranjang","constructor","props","ambilDataDariServerAPI","uid","userRef","database","ref","state","user","once","snapshot","newUserState","forEach","data","dataVal","val","push","id","key","nama","harga","gambar","stok","qty","setState","listKeranjang","apps","length","initializeApp","app","authListener","auth","onAuthStateChanged","console","log","email","componentDidMount","componentDidUpdate","prevProps","prevState","render","no","total","map","televisi","handleGetTelevisi"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport firebase from 'firebase'\nimport firebaseConfig from '../../config'\nimport PostKeranjang from './PostKeranjang'\n\nclass Keranjang extends Component {\n\n    constructor(props) {\n      super(props);\n  \n      if (!firebase.apps.length) {\n        firebase.initializeApp(firebaseConfig);\n      } else {\n        firebase.app(); // if already initialized, use that one\n      }\n  \n      this.state = {\n        listKeranjang: [],\n        user: {}\n      }\n  \n      this.authListener();\n  \n    }\n  \n    authListener() {\n      firebase.auth().onAuthStateChanged((user) => {\n        if (user) {\n          this.setState({\n            user\n          })\n  \n          this.ambilDataDariServerAPI(user.uid);\n  \n          console.log(\"User adalah : \" + user.email)\n        }\n        else {\n          this.setState({\n            user: null\n          })\n        }\n      })\n    }\n  \n    ambilDataDariServerAPI = (uid) => {\n      // this.authListener();\n      // console.log(\"uid: \"+this.state.user.uid)\n      const userRef = firebase.database().ref('keranjang/'+this.state.user.uid);\n      userRef.once('value', (snapshot) => {\n        let newUserState = [];\n        snapshot.forEach(data => {\n          const dataVal = data.val()\n          newUserState.push({\n            id: data.key,\n            nama: dataVal.nama,\n            harga: dataVal.harga,\n            gambar: dataVal.gambar,\n            stok: dataVal.stok,\n            qty: dataVal.qty\n          })\n        })\n        this.setState({\n          listKeranjang: newUserState\n        })\n        // console.log(this.state);\n      })\n    }\n  \n    // componentWillMount() {\n    //   this.authListener();\n    // }\n  \n    componentDidMount() {\n      // this.authListener();\n      this.ambilDataDariServerAPI();\n    }\n  \n    componentDidUpdate(prevProps, prevState) {\n      // this.ambilDataDariServerAPI();\n    }\n  \n    render() {\n      var no = 0;\n      var total = 0;\n      return (\n        <div className=\"post-televisi\">\n          {\n                  /* <div className=\"form pb-2 border-bottom\">\n                      <button type=\"submit\" className=\"btn btn-primary\" onClick={this.handleTombolSimpan}>Simpan</button>\n                  </div> */}\n          <center><h2>Keranjang</h2></center>\n          <div className=\"tgh\">\n            <table border=\"1\" cellPadding=\"5\" width=\"100%\">\n              <tr>\n                <th align=\"center\">No</th>\n                {/* <th align=\"center\">ID Produk</th> */}\n                <th align=\"left\">Nama</th>\n                <th align=\"center\">Gambar</th>\n                <th align=\"center\">Harga</th>\n                <th align=\"center\">Qty</th>\n                <th align=\"center\">Subtotal</th>\n              </tr>\n              {\n                this.state.listKeranjang.map(televisi => {\n                  no += 1;\n                  total += televisi.harga * televisi.qty\n                  return (\n                    <PostKeranjang\n                      no={no}\n                      key={televisi.id}\n                      id={televisi.id}\n                      nama={televisi.nama}\n                      harga={televisi.harga}\n                      gambar={televisi.gambar}\n                      stok={televisi.stok}\n                      qty={televisi.qty}\n                      tambahTelevisi={this.handleGetTelevisi} />\n                  )\n                })\n              }\n              <tr>\n                <td colSpan=\"5\" align=\"right\">Total : </td>\n                <td align=\"center\">{total}</td>\n              </tr>\n            </table>\n          </div>\n        </div>\n      )\n    }\n  }\n\nexport default Keranjang;"]},"metadata":{},"sourceType":"module"}